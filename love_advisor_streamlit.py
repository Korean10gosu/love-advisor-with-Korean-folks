# love_advisor_streamlit.py

# ìˆ˜ì • í›„ (Streamlit Secrets ì‚¬ìš©)
import os
import openai
import streamlit as st

# -----------------------
# í•œê¸€ ê³ ì „ ê¸€ê¼´ + í•œì§€ ë°°ê²½ ì ìš©
# -----------------------
st.markdown(
    """
    <style>
    /* ì „ì²´ ë°°ê²½ */
    .stApp {
        background: url("https://images.unsplash.com/photo-1601611025129-1b8bb6b3b1aa") no-repeat center center fixed;
        background-size: cover;
    }

    /* ë‚´ë¶€ ì»¨í…Œì´ë„ˆë„ íˆ¬ëª…í•˜ê²Œ ë§Œë“¤ì–´ ë°°ê²½ì´ ë³´ì´ë„ë¡ */
    .css-18e3th9, .block-container {
        background-color: rgba(255, 255, 255, 0.85); /* ì•½ê°„ ë°˜íˆ¬ëª… */
    }

    /* ì•± ì œëª© */
    h1 {
        font-family: 'Nanum Myeongjo', serif !important;
        font-size: 48px !important;
        font-weight: bold !important;
        color: #4B3B2A !important;
        text-align: center;
        margin-bottom: 30px;
    }
    </style>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
    """,
    unsafe_allow_html=True
)

st.markdown('<h1>ê³ ì „ë¬¸í•™ê³¼ í•¨ê»˜í•˜ëŠ” ì—°ì•  ìƒë‹´ í”„ë¡œê·¸ë¨</h1>', unsafe_allow_html=True)




# Streamlit Secretsì—ì„œ ì½ê¸°
client = openai.OpenAI(api_key=st.secrets["OPENAI_API_KEY"])

# -----------------------
# ê³ ì „ ì‘í’ˆ ë°ì´í„° (app.py ê¸°ì¤€ ì „ì²´ í¬í•¨)
# -----------------------
classic_love_db = {
    "ì§ì‚¬ë‘ì„ í•˜ëŠ”ë° ê³ ë°±ì´ ë§ì„¤ì—¬ì§€ëŠ” ìƒí™©": [
        {
            "title": "ì´ìƒê·œì¥ì „",
            "characters": "ì´ìƒ, ìµœë‘",
            "problem": (
                "ì†¡ë„ì— ì‚¬ëŠ” ì´ìƒì´ í•™ë‹¹ì— ë‹¤ë‹ˆë‹¤ê°€ ìµœì”¨ ê·œìˆ˜(ìµœë‘)ë¥¼ ë³´ê³  ê¹Šì´ ì‚¬ëª¨í•˜ê²Œ ë˜ì—ˆì§€ë§Œ "
                "ì‹ ë¶„ ì°¨ì´ì™€ ì˜ˆë²• ë•Œë¬¸ì— ìì‹ ì˜ ë§ˆìŒì„ í‘œí˜„í•˜ì§€ ëª»í•´ ë§ì„¤ì´ëŠ” ìƒí™©."
            ),
            "solution": (
                "ê²°êµ­ ìš©ê¸°ë¥¼ ë‚´ì–´ ë‹´ì„ ë„˜ì–´ ë§ˆìŒì„ ì „í–ˆê³ , ìµœë‘ë„ ê°™ì€ ë§ˆìŒì´ì—ˆìŒì´ ë“œëŸ¬ë‚˜ "
                "ë‘ ì‚¬ëŒì€ ëª°ë˜ ì‚¬ë‘ì„ ë‚˜ëˆ„ê²Œ ë¨. ì´í›„ ë¶€ëª¨ì˜ í—ˆë½ì„ ë°›ì•„ ì •ì‹ìœ¼ë¡œ í˜¼ì¸í•¨."
            ),
            "lesson": (
                "ì§ì‚¬ë‘ì€ í‘œí˜„í•˜ì§€ ì•Šìœ¼ë©´ ê¸°íšŒë¥¼ ë†“ì¹  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤Œ. "
                "ì´ìƒì²˜ëŸ¼ ë‘ë ¤ì›€ì„ ê·¹ë³µí•˜ê³  ì§„ì‹¬ì„ ì „í•  ë•Œ ë¹„ë¡œì†Œ ìƒëŒ€ì˜ ë§ˆìŒì„ ì•Œ ìˆ˜ ìˆìŒ."
            ),
            "advice": (
                "í˜„ì¬ ë§ì„¤ì„ì´ í° ìƒí™©ì´ë¼ë©´, ê±°ì ˆì— ëŒ€í•œ ë‘ë ¤ì›€ ëŒ€ì‹  â€˜ë‚´ ë§ˆìŒì„ ì†”ì§íˆ ì „í•´ë³´ëŠ” ê²ƒâ€™ì˜ ê°€ì¹˜ë¥¼ ìƒê°í•´ë³¼ ê²ƒ. "
                "í‘œí˜„ì€ ê´€ê³„ì˜ ì‹œì‘ì´ë©°, ê¸°íšŒë¥¼ ë§Œë“œëŠ” ìš©ê¸° ìì²´ê°€ ì¤‘ìš”í•œ ì„ íƒì„."
            )
        },
        {
            "title": "ë§Œë³µì‚¬ì €í¬ê¸°",
            "characters": "ì–‘ìƒ, ì£½ì€ ì²˜ë…€ì˜ í˜¼ë ¹",
            "problem": (
                "ê°€ë‚œí•˜ê³  ì™¸ë¡œìš´ ì–‘ìƒì´ ì£½ì€ ì²˜ë…€ì˜ í˜¼ë ¹ì—ê²Œ ëŒë¦¬ì§€ë§Œ, "
                "ì´ë£¨ì–´ì§ˆ ìˆ˜ ì—†ëŠ” ì‚¬ë‘ì´ë¼ëŠ” ì ì—ì„œ ë§ˆìŒì´ í—ˆë¬´í•˜ê³  ìŠ¬í”ˆ ì§ì‚¬ë‘ì˜ ìƒí™©."
            ),
            "solution": (
                "ì €ìŠ¹ì‚¬ìì™€ ì €í¬(ì£¼ì‚¬ìœ„ ë†€ì´)ë¥¼ í•´ì„œ ì´ê¸°ë©´ í•˜ë£»ë°¤ í•¨ê»˜í•  ìˆ˜ ìˆë‹¤ëŠ” ì œì•ˆì„ ë°›ì•„ "
                "ì´ˆì›”ì ì¸ ë°©ì‹ìœ¼ë¡œ ì ì‹œ ì‚¬ë‘ì„ ì´ë£¸. ê·¸ëŸ¬ë‚˜ ë‹¤ìŒ ë‚  ì—¬ì¸ì€ ì‚¬ë¼ì§€ê³ , ì–‘ìƒì€ ì„¸ì†ì„ ë²„ë¦¬ê³  ê¸ˆê°•ì‚°ìœ¼ë¡œ ë“¤ì–´ê°."
            ),
            "lesson": (
                "ì´ë£° ìˆ˜ ì—†ëŠ” ì‚¬ë‘ë„ ì¡´ì¬í•˜ë©°, ì´ë¥¼ ì–µì§€ë¡œ ì¥ê³  ìˆê¸°ë³´ë‹¤ ë‚´ë ¤ë†“ëŠ” ê²ƒì´ ìŠ¤ìŠ¤ë¡œë¥¼ ì§€í‚¤ëŠ” ê¸¸ì¼ ìˆ˜ ìˆìŒ."
            ),
            "advice": (
                "ìƒëŒ€ê°€ ì´ë¯¸ ê´€ê³„ ì˜ì§€ê°€ ì—†ê±°ë‚˜ í˜„ì‹¤ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•œ ìƒí™©ì´ë¼ë©´, ì§‘ì°©ë³´ë‹¤ ìˆ˜ìš©ì´ í•„ìš”í•¨. "
                "ì–‘ìƒì²˜ëŸ¼ â€˜ì¡ì„ ìˆ˜ ì—†ìŒì„ ì¸ì •í•˜ëŠ” ê²ƒâ€™ ë˜í•œ ì‚¬ë‘ì˜ í•œ í˜•íƒœì´ë©° ì„±ì¥ì˜ ê³¼ì •ì„."
            )
        }
    ],

    "ì™¸ë¶€ì˜ ë°©í•´ê°€ ìˆëŠ” ìƒí™©": [
        {
            "title": "ìˆ™í–¥ì „",
            "characters": "ì´ì„ , ìˆ™í–¥, ìš”ê´´",
            "problem": (
                "ì„œë¡œ ê¹Šì´ ì‚¬ë‘í•˜ëŠ” ë‘ ì‚¬ëŒì´ ì™¸ë¶€ì˜ ìš”ê´´ì™€ ì˜¨ê°– ê³„ëµìœ¼ë¡œ ì¸í•´ ê³„ì† ê°ˆë¼ì§€ë©° "
                "ì‚¬ë‘ì´ í”ë“¤ë¦´ ìˆ˜ ìˆëŠ” ì‹œë ¨ì„ ê²½í—˜í•¨."
            ),
            "solution": (
                "ì´ì„ ê³¼ ìˆ™í–¥ì€ ë‹¨ í•œ ë²ˆë„ ì„œë¡œë¥¼ ì˜ì‹¬í•˜ì§€ ì•Šê³  ì™„ì „í•œ ì‹ ë¢°ë¥¼ ìœ ì§€í•˜ì—¬ "
                "ëª¨ë“  ìœ í˜¹ê³¼ ë°©í•´ë¥¼ ì´ê²¨ëƒ„."
            ),
            "lesson": (
                "ì™¸ë¶€ì˜ ë°©í•´ ì†ì—ì„œë„ ì„œë¡œì— ëŒ€í•œ ë¯¿ìŒì´ êµ³ê±´í•˜ë©´ ê´€ê³„ëŠ” í”ë“¤ë¦¬ì§€ ì•ŠëŠ”ë‹¤ëŠ” êµí›ˆì„ ì¤Œ."
            ),
            "advice": (
                "ì£¼ë³€ ì‚¬ëŒì˜ ë§, ì˜¤í•´, ë¶ˆì•ˆ ìš”ì†Œê°€ ìˆì„ ë•Œì¼ìˆ˜ë¡ â€˜ìƒëŒ€ì™€ì˜ ì‹ ë¢°â€™ê°€ í•µì‹¬. "
                "ì‚¬ë‘ì„ ì§€í‚¤ëŠ” ê°€ì¥ í° í˜ì€ ì„œë¡œì— ëŒ€í•œ ë³€í•¨ì—†ëŠ” ë¯¿ìŒì„."
            )
        }
    ],

    "ì´ë³„í–ˆì§€ë§Œ ì¬íšŒí•˜ê³  ì‹¶ì€ ìƒí™©": [
        {
            "title": "ìµœì²™ì „",
            "characters": "ìµœì²™, ì˜¥ì˜",
            "problem": (
                "ì „ìŸ(ì„ì§„ì™œë€)ì´ë¼ëŠ” ì™¸ì ì¸ ìš”ì¸ìœ¼ë¡œ ì¸í•´ ì‹ í˜¼ë¶€ë¶€ê°€ ì¤‘êµ­ê³¼ ì¼ë³¸ìœ¼ë¡œ í©ì–´ì§€ë©° "
                "ìŠ¤ìŠ¤ë¡œì˜ í˜ìœ¼ë¡œëŠ” ì–´ì©” ìˆ˜ ì—†ëŠ” ì´ë³„ì„ ê²ªëŠ” ìƒí™©."
            ),
            "solution": (
                "ì„œë¡œë¥¼ ìŠì§€ ì•Šê³  ìˆ˜ì‹­ ë…„ ë™ì•ˆ ì°¾ì•„ í—¤ë§¤ë©°, ê²°êµ­ í•´ì™¸ì—ì„œ ê·¹ì ìœ¼ë¡œ ì¬íšŒí•´ ë‹¤ì‹œ ì¡°ì„ ìœ¼ë¡œ ëŒì•„ê°."
            ),
            "lesson": (
                "ì™¸ë¶€ í™˜ê²½ì´ ë§Œë“  ë¶ˆê°€í”¼í•œ ì´ë³„ì´ë¼ë©´ í¬ê¸°í•˜ì§€ ì•Šì„ ë•Œ ë‹¤ì‹œ ë§Œë‚  ìˆ˜ ìˆìœ¼ë©° "
                "ì§„ì •í•œ ì‚¬ë‘ì€ ì‹œê°„ê³¼ ê³µê°„ì„ ì´ˆì›”í•¨."
            ),
            "advice": (
                "í—¤ì–´ì§ì˜ ì›ì¸ì´ ì„œë¡œì˜ ì˜ëª»ì´ ì•„ë‹ˆë¼ ì™¸ì ì¸ ì´ìœ ë¼ë©´, ê´€ê³„ì˜ ê°€ëŠ¥ì„±ì„ ì—´ì–´ë‘ëŠ” ê²ƒë„ ì„ íƒì§€ì„. "
                "ë‹¤ë§Œ ê¸°ë‹¤ë¦¼ê³¼ ë…¸ë ¥ì€ ì„œë¡œì˜ ì˜ì§€ê°€ ìˆì„ ë•Œ ì˜ë¯¸ê°€ ìˆìŒ."
            )
        }
    ],

    "ì‚¼ê°ê´€ê³„": [
        {
            "title": "ì£¼ìƒì „",
            "characters": "ì£¼ìƒ, ë°°ë„, ì„ í™”",
            "problem": (
                "ì£¼ìƒì´ ê¸°ìƒ ë°°ë„ë¥¼ ì‚¬ë‘í•˜ì§€ë§Œ ê°€ë¬¸ì˜ ëœ»ì— ë”°ë¼ ì–‘ë°˜ ê·œìˆ˜ ì„ í™”ì™€ í˜¼ì¸í•´ì•¼ í•˜ëŠ” "
                "ì‚¼ê°ê´€ê³„ ìƒí™©ì—ì„œ ìš°ìœ ë¶€ë‹¨í•œ íƒœë„ë¥¼ ë³´ì„."
            ),
            "solution": (
                "ì£¼ìƒì˜ ê°ˆë“±ê³¼ ë¯¸ë£¨ëŠ” íƒœë„ ë•Œë¬¸ì— ë°°ë„ì™€ ì„ í™” ëª¨ë‘ ê³ í†µë°›ê³ , "
                "ì„ì§„ì™œë€ ë“± ê²©ë³€ ì†ì—ì„œ ê²°êµ­ ëˆ„êµ¬ë„ í–‰ë³µí•˜ì§€ ëª»í•œ ê²°ë§ì„ ë§ìŒ."
            ),
            "lesson": (
                "ì‚¼ê°ê´€ê³„ì—ì„œ ìš°ìœ ë¶€ë‹¨í•¨ì€ ëª¨ë‘ë¥¼ ë¶ˆí–‰í•˜ê²Œ ë§Œë“¤ë©°, ë§ˆìŒì˜ ì„ íƒê³¼ ì±…ì„ì´ ë°˜ë“œì‹œ í•„ìš”í•¨."
            ),
            "advice": (
                "â€˜ëˆ„êµ°ê°€ë¥¼ ìƒì„ê¹Œ ë‘ë ¤ì›Œ ì„ íƒì„ ë¯¸ë£¨ëŠ” ê²ƒâ€™ì´ ì˜¤íˆë ¤ ë” í° ìƒì²˜ë¥¼ ë§Œë“ ë‹¤ëŠ” ì ì„ ê¸°ì–µí•´ì•¼ í•¨. "
                "ì§€ê¸ˆì˜ ê°ì •ì„ ëª…í™•íˆ í•˜ê³  ì±…ì„ì§ˆ ìˆ˜ ìˆëŠ” ì„ íƒì„ í•´ì•¼ í•¨."
            )
        }
    ],

    "ì¢‹ì•„í•˜ë©´ ì•ˆ ë˜ëŠ” ì‚¬ëŒì„ ì¢‹ì•„í•˜ëŠ” ìƒí™©": [
        {
            "title": "ìš´ì˜ì „",
            "characters": "ìš´ì˜, ìœ ì˜, ìë€",
            "problem": (
                "ê¶ë…€ ìš´ì˜ì€ ì—°ì• ê°€ ê¸ˆì§€ëœ ì‹ ë¶„ì„ì—ë„ ìœ ì˜ê³¼ ì‚¬ë‘ì— ë¹ ì§€ëŠ”, "
                "ì‚¬íšŒì  ê·œë²”Â·ì§ì—…ì  ì œì•½ ë•Œë¬¸ì— ì‚¬ë‘ ìì²´ê°€ ê¸ˆì§€ëœ ìƒí™©."
            ),
            "solution": (
                "ëª°ë˜ ì‚¬ë‘ì„ ì´ì–´ê°€ì§€ë§Œ ê²°êµ­ ë°œê°ë˜ì–´ ë‘ ì‚¬ëŒ ëª¨ë‘ ì‚¬í˜•ë‹¹í•˜ê³ , "
                "ì£½ì–´ì„œì•¼ í˜¼ë ¹ìœ¼ë¡œ ì¬íšŒí•¨."
            ),
            "lesson": (
                "ì‚¬ë‘ì˜ ê°ì •ì€ ìˆ­ê³ í•˜ì§€ë§Œ, ì‚¬íšŒì  ê¸ˆê¸°ì™€ ê·œë²” ì†ì—ì„œ ì±…ì„ ë˜í•œ ë¬´ê²ë‹¤ëŠ” ì‚¬ì‹¤ì„ ë³´ì—¬ì¤Œ."
            ),
            "advice": (
                "í˜„ëŒ€ì ìœ¼ë¡œëŠ” â€˜ì¹œêµ¬ì˜ ì „ ì—°ì¸Â·ì§ì¥ ìƒí•˜ ê´€ê³„Â·ìœ¤ë¦¬ì  ë¬¸ì œâ€™ì™€ ë¹„ìŠ·í•œ ë§¥ë½. "
                "ì‚¬ë‘ ê°ì • ìì²´ë³´ë‹¤ ê·¸ ì„ íƒì´ ì´ˆë˜í•  ê²°ê³¼ë¥¼ ë¨¼ì € ê³ ë ¤í•´ì•¼ í•¨."
            )
        }
    ],

    "ì´ë³„ë¡œ í˜ë“¤ì–´í•˜ëŠ” ìƒí™©": [
        {
            "title": "ì†ë¯¸ì¸ê³¡",
            "characters": "ê°‘ë…€(ì¡°ì–¸ì), ì„ë…€(ì´ë³„ ë‹¹ì‚¬ì)",
            "problem": (
                "ê°‘ì‘ìŠ¤ë ˆ ì´ë³„ì„ í†µë³´ë°›ê³  ìƒëŒ€ì˜ ì°¨ë‹¨ ë“±ìœ¼ë¡œ ë‹¤ì‹œ ë§Œë‚  ìˆ˜ë„ ì—†ëŠ” í˜„ì‹¤. "
                "ì„ë…€ëŠ” ìš°ìš¸ê°ê³¼ ê·¸ë¦¬ì›€ì— ì‹œë‹¬ë¦¬ë©° ìì‹ ì„ íƒ“í•˜ê³  ìˆìŒ."
            ),
            "solution": (
                "ì„ë…€ëŠ” ì¹œêµ¬ì¸ ê°‘ë…€ì—ê²Œ ê³ ë¯¼ì„ í„¸ì–´ë†“ê³ , ê°‘ë…€ëŠ” â€˜ì™¸ëª¨Â·ì„±ê²© íƒ“ ê¸ˆì§€â€™, "
                "â€˜ìê¸° ë¹„í•˜ ëŒ€ì‹  ê°ì • í•´ì†Œâ€™ë¼ëŠ” ë°©ì‹ìœ¼ë¡œ ìì¡´ê°ì„ ì§€ì¼œì£¼ë©° íšŒë³µì„ ë•ê³  ìˆìŒ."
            ),
            "lesson": (
                "í—¤ì–´ì§„ ì‚¬ëŒì—ê²Œ ë§¤ë‹¬ë¦¬ë©° ìŠ¤ìŠ¤ë¡œë¥¼ ê¹ì•„ë‚´ë¦¬ê¸°ë³´ë‹¤, "
                "ê°ê´€ì  ì‹œì„ ì„ ê°€ì§„ ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ ê°ì •ì„ ê³µìœ í•˜ë©° íšŒë³µí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•¨."
            ),
            "advice": (
                "ì°¨ë‹¨, ë‹¨ì ˆ, ê±°ì ˆì€ ê°œì¸ì˜ ê°€ì¹˜ì™€ ë¬´ê´€í•¨. "
                "ì¹œêµ¬Â·ê°€ì¡± ë“± â€˜í˜„ì¬ ê³ì— ìˆëŠ” ì‚¬ëŒë“¤â€™ì„ í†µí•´ ê°ì •ì„ ì •ë¦¬í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•¨."
            )
        }
    ],

    "ì—°ì• ë¡œ ì¸í•´ ë‚˜ì˜ ì‚¶ì— ì†Œí™€í•´ì§„ ìƒí™©": [
        {
            "title": "ê²¬ìš°ì™€ ì§ë…€",
            "characters": "ê²¬ìš°, ì§ë…€",
            "problem": (
                "ì„œë¡œì—ê²Œ ë¹ ì ¸ ê°ìì˜ ë³¸ì—…(ë°­ì„ ì¼êµ¬ëŠ” ì¼, ë²  ì§œëŠ” ì¼)ì— ì†Œí™€í•´ì ¸ "
                "ê´€ê³„ë¿ ì•„ë‹ˆë¼ ì‚¶ê¹Œì§€ ííŠ¸ëŸ¬ì§€ëŠ” ìƒí™©."
            ),
            "solution": (
                "í•˜ëŠ˜ì—ì„œ ë‘ ì‚¬ëŒì˜ ë§Œë‚¨ì„ ì œì•½í•˜ì—¬ ì¼Â·ì‚¬ë‘ì˜ ê· í˜•ì„ ê°•ì œë¡œ ë§ì¶”ê²Œ í•¨. "
                "íŠ¹ì • ë‚ ì—ë§Œ ë§Œë‚˜ë„ë¡ í•˜ì—¬ ì¡°í™”ë¥¼ ì°¾ìŒ."
            ),
            "lesson": (
                "ì‚¬ë‘ë„ ì¤‘ìš”í•˜ì§€ë§Œ ìì‹ ì˜ ì¼Â·í•™ì—…ì„ ë°©ì¹˜í•˜ë©´ ê´€ê³„ë„ í•¨ê»˜ ë¬´ë„ˆì§."
            ),
            "advice": (
                "ì—°ì¸ì´ ì‚¶ì˜ ì „ë¶€ê°€ ë˜ê¸°ë³´ë‹¤, ì„œë¡œê°€ ì„œë¡œì˜ ì„±ì¥ì„ ë•ëŠ” ê´€ê³„ê°€ ë˜ëŠ” ê²ƒì´ ê±´ê°•í•¨. "
                "ë§Œë‚¨ì˜ ë¹ˆë„Â·ì‹œê°„ì„ ì ì ˆíˆ ì¡°ì •í•´ì•¼ í•¨."
            )
        }
    ],

    "ì—°ì• ì™€ ì¼ ëª¨ë‘ ì±™ê¸°ê¸° ì–´ë ¤ìš´ ìƒí™©": [
        {
            "title": "êµ¬ìš´ëª½",
            "characters": "ì„±ì§„",
            "problem": (
                "ì‚¬ë‘Â·ì¶œì„¸Â·ë¶€Â·ëª…ì˜ˆ ë“± ëª¨ë“  ê²ƒì„ ë™ì‹œì— ì´ë£¨ê³  ì‹¶ì–´ í•˜ëŠ” ìš•ë§ì´ ì¶©ëŒí•˜ëŠ” ìƒí™©."
            ),
            "solution": (
                "ê¿ˆì—ì„œ ê¹¨ì–´ë‚˜ ëª¨ë“  ìš•ë§ì´ í—ˆë¬´í•œ í•œë‚± ê¿ˆì´ì—ˆìŒì„ ê¹¨ë‹«ê³  ë³¸ë˜ì˜ ë¶ˆë²• ìˆ˜í–‰ìœ¼ë¡œ ëŒì•„ê°."
            ),
            "lesson": (
                "ì‚¬ë‘ê³¼ ì„±ê³µì— ëŒ€í•œ ê³¼ë„í•œ ìš•ë§ì€ ë§ì—†ìœ¼ë©°, ìì‹ ì´ ì§„ì§œ ì›í•˜ëŠ” ê°€ì¹˜ê°€ ë¬´ì—‡ì¸ì§€ ì„±ì°°í•´ì•¼ í•¨."
            ),
            "advice": (
                "â€˜ëª¨ë“  ê±¸ ì™„ë²½í•˜ê²Œ í•´ë‚´ì•¼ í•œë‹¤â€™ëŠ” ë¶€ë‹´ì„ ë‚´ë ¤ë†“ê³  ì¤‘ìš”í•œ ê°€ì¹˜ë¶€í„° ìš°ì„ ìˆœìœ„ë¡œ ì •ë¦¬í•´ì•¼ í•¨."
            )
        },
        {
            "title": "ìˆ™ì˜ë‚­ìì „",
            "characters": "ìˆ™ì˜ ë‚­ì, ë°±ì„ êµ°, ë°± ê³µ, ë°±ì„ êµ° ë¶€ì¸",
            "problem": (
                "ì„œë¡œ ì‚¬ë‘í•˜ì§€ë§Œ ì‚¬íšŒì Â·ê²½ì œì  ê²©ì°¨ì™€ ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ë°©í•´ë¡œ "
                "ì‚¬ë‘ê³¼ ì‚¶ì˜ í˜„ì‹¤ ì‚¬ì´ì—ì„œ ê°ˆë“±í•¨."
            ),
            "solution": (
                "ìˆ˜ë§ì€ ê³ ë‚œ ì†ì—ì„œë„ ì„œë¡œë¥¼ í–¥í•œ ì‹ ì˜ì™€ í—Œì‹ ì„ ìƒì§€ ì•Šì•„ ê²°êµ­ ì¬íšŒí•˜ê³  ì‚¬ë‘ì„ ì§€ì¼œëƒ„."
            ),
            "lesson": (
                "ì§„ì •í•œ ì‚¬ë‘ì€ ì¡°ê±´Â·í™˜ê²½ì— í”ë“¤ë¦¬ì§€ ì•Šìœ¼ë©° í—Œì‹ ê³¼ ì¸ë‚´ê°€ í•„ìš”í•¨."
            ),
            "advice": (
                "ì—°ì• ì™€ í˜„ì‹¤ ì‚¬ì´ì—ì„œ ê°ˆë“±í•œë‹¤ë©´, ë‘˜ì„ ëª¨ë‘ ì§€í‚¤ê¸° ìœ„í•´ í•„ìš”í•œ â€˜ìš°ì„ ìˆœìœ„Â·ë°©ì‹Â·í˜‘ë ¥â€™ì„ ëŒ€í™”ë¡œ ì¡°ìœ¨í•  ê²ƒ."
            )
        }
    ],

    "ì—°ì•  ì¤‘ì¸ë° ë‹¤ë¥¸ ì‚¬ëŒì´ ì¢‹ì•„ì§„ ìƒí™©": [
        {
            "title": "ë°°ë¹„ì¥ì „",
            "characters": "ë°°ë¹„ì¥, ì• ë‘, ì œì£¼ëª©ì‚¬",
            "problem": (
                "ì—°ì¸ì´ ìˆìŒì—ë„ ë‹¤ë¥¸ ì‚¬ëŒì´ ëˆˆì— ë“¤ì–´ì˜¤ë©° ìœ í˜¹ì— í”ë“¤ë¦¬ëŠ” ìƒí™©."
            ),
            "solution": (
                "ë°°ë¹„ì¥ì€ ìì‹ ì˜ í—ˆìœ„ì™€ ìœ„ì„ ì´ ë“œëŸ¬ë‚˜ë©° ì¡°ë¡±ë‹¹í•¨. "
                "ê°ì •ì— íœ˜ë‘˜ë¦° ëŒ€ê°€ë¥¼ í˜¹ë…í•˜ê²Œ ì¹˜ë¦„."
            ),
            "lesson": (
                "ìš•ë§ì— í”ë“¤ë¦¬ëŠ” ìˆœê°„ ì¸ê°„ì˜ í—ˆì˜ê³¼ ìœ„ì„ ì´ ë“œëŸ¬ë‚˜ë©°, ê´€ê³„ì˜ ì§„ì •ì„±ì€ â€˜ì§„ì‹¬ì— ëŒ€í•œ ì±…ì„â€™ì—ì„œ ë¹„ë¡¯ë¨."
            ),
            "advice": (
                "ìƒˆë¡œìš´ ì„¤ë ˜ì´ ìƒê¸¸ ìˆ˜ëŠ” ìˆì§€ë§Œ, ê·¸ ê°ì •ì„ í–‰ë™ìœ¼ë¡œ ì˜®ê¸¸ì§€ ì—¬ë¶€ëŠ” ì „ì ìœ¼ë¡œ ì±…ì„ ë¬¸ì œì„. "
                "í˜„ì¬ì˜ ê´€ê³„ë¥¼ ì¡´ì¤‘í•˜ëŠ” ì„±ì°°ì´ ë°˜ë“œì‹œ í•„ìš”í•¨."
            )
        },
        {
            "title": "ê¶Œìš©ì„ ì „",
            "characters": "ê¶Œìš©ì„ , ì˜¤ ì†Œì €, ì˜í¬ ê³µì£¼, ê¶Œì¸ìƒ, ê¹€ ì†Œì €",
            "problem": (
                "ë‹¤ì‹œ ê´€ê³„ë¥¼ ì´ì–´ê°ˆì§€ ë§ì§€ ê³ ë¯¼í•˜ëŠ” ìƒí™©ê³¼ ì™¸ì  ì••ë ¥, ê°ˆë“±ì´ ê²¹ì¹œ ë³µì¡í•œ ì—°ì•  í™˜ê²½."
            ),
            "solution": (
                "ìˆ˜ë§ì€ ìœ„í˜‘ ì†ì—ì„œë„ ì¶©ì„±ê³¼ ì¸ë‚´ë¥¼ ìƒì§€ ì•Šì•„ ê²°êµ­ ì‚¬ë‘ì„ íšŒë³µí•¨."
            ),
            "lesson": (
                "ì§„ì •í•œ ê´€ê³„ëŠ” ì‹œë ¨ ì†ì—ì„œë„ ì˜ë¦¬ì™€ ì‹ ì˜ë¥¼ ì§€ì¼œì•¼ ìœ ì§€ë¨."
            ),
            "advice": (
                "ì¬ê²°í•©ì„ ê³ ë¯¼í•  ë•ŒëŠ” ê°ì •ë¿ ì•„ë‹ˆë¼ â€˜ê·¸ ì‚¬ëŒì´ ì‹ ë¢°í•  ë§Œí•œê°€â€™ì™€ "
                "â€˜ì„œë¡œê°€ ì„±ì¥í–ˆëŠ”ê°€â€™ë¥¼ í•¨ê»˜ ê³ ë ¤í•´ì•¼ í•¨."
            )
        }
    ],

    "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë°©í•´ë¡œ ì—°ì• ê°€ ì˜ ë˜ì§€ ì•ŠëŠ” ìƒí™©": [
        {
            "title": "ì‚¬ì”¨ë‚¨ì •ê¸°",
            "characters": "ì‚¬ì”¨, ê°„ì‹ , ì²©, ë‚¨í¸",
            "problem": (
                "ê°„ì‹ ê³¼ ì²©ì˜ ê±°ì§“ ëª¨í•¨ìœ¼ë¡œ ì¸í•´ ì •ì‹¤ ë¶€ì¸ì´ ì–µìš¸í•˜ê²Œ ì«“ê²¨ë‚˜ê³  "
                "ì‚¬ë‘ê³¼ ê°€ì •ì´ ë¬´ë„ˆì§€ëŠ” ìƒí™©."
            ),
            "solution": (
                "ì‚¬ì”¨ëŠ” ëê¹Œì§€ í’ˆìœ„ì™€ ë•ì„ ì§€í‚¤ë©° ëˆ„ëª…ì„ ë²—ê³  ëŒì•„ì˜´. "
                "ê±°ì§“ì„ ì¼ì‚¼ë˜ ì²©ê³¼ ê°„ì‹ ì€ ì˜¤íˆë ¤ ìŠ¤ìŠ¤ë¡œì˜ ì•…í–‰ì´ ë“œëŸ¬ë‚˜ ì²˜ë²Œë°›ìŒ."
            ),
            "lesson": (
                "ê±°ì§“ëœ ë°©í•´ëŠ” ê²°êµ­ ë¬´ë„ˆì§€ê³ , ì§„ì‹¬ê³¼ ì˜¬ë°”ë¥¸ í–‰ë™ì€ ë°˜ë“œì‹œ ì¸ì •ë°›ëŠ”ë‹¤ëŠ” êµí›ˆ."
            ),
            "advice": (
                "íƒ€ì¸ì˜ ì§ˆíˆ¬Â·ì´ê°„ì§ˆë¡œ ê´€ê³„ê°€ í”ë“¤ë¦´ ë•Œì¼ìˆ˜ë¡, ìŠ¤ìŠ¤ë¡œì˜ ì§„ì •ì„±ê³¼ ì¼ê´€ë¨ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ê²°êµ­ ê´€ê³„ë¥¼ ì§€í‚¤ëŠ” ê¸¸ì„."
            )
        }
    ]
}


# -----------------------
# ìƒë‹´ í•¨ìˆ˜
# -----------------------
import json
import os
from dotenv import load_dotenv
load_dotenv()

import openai

client = openai.OpenAI(api_key=os.getenv("OPENAI_API_KEY"))

def get_advice(user_input: str) -> str:
    # classic_love_dbë¥¼ ë¬¸ìì—´ë¡œ ë¯¸ë¦¬ ë³€í™˜
    data_str = json.dumps(classic_love_db, ensure_ascii=False)

    system_prompt = f"""
ë‹¹ì‹ ì€ í•œêµ­ ê³ ì „ë¬¸í•™ ê¸°ë°˜ ì—°ì•  ìƒë‹´ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë‹µë³€ì€ ë°ì´í„° ì™¸ ì •ë³´ë¥¼ í¬í•¨í•˜ë©´ ì•ˆë©ë‹ˆë‹¤.
ì‘í’ˆ ì •ë³´ì—ëŠ” ì‘ê°€ê°€ ì—†ìœ¼ë©´, ì‘ê°€ë¥¼ ë§Œë“¤ì–´ë‚´ì§€ ë§ê³  ìƒëµí•˜ì„¸ìš”.
ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì—°ì•  ê³ ë¯¼ì„ ë°”íƒ•ìœ¼ë¡œ, ê´€ë ¨ ê³ ì „ ì‘í’ˆì„ ì¶”ì²œí•˜ê³  ë‹¤ìŒ ì–‘ì‹ì— ë§ì¶°ì„œ ëŒ€ë‹µì„ ì¶œë ¥í•˜ì„¸ìš”.
ê³ ì „ ì‘í’ˆì—ì„œ ë‚˜íƒ€ë‚œ ë¬¸ì œìƒí™©,
í•´ê²° ê³¼ì •,
êµí›ˆ,
ê³ ì „ ì‘í’ˆê³¼ ì‚¬ìš©ìì˜ ìƒí™©ì„ ê³ ë ¤í•œ í˜„ëŒ€ì  ì¡°ì–¸ì„
ì™„ê²°ëœ í•˜ë‚˜ì˜ ê¸€ë¡œ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œí•œ ë’¤
ì‘í’ˆ ì† ì£¼ì¸ê³µì´ ì‚¬ìš©ìì—ê²Œ í•´ì¤„ ë§Œí•œ 1ì¤„ ì¡°ì–¸ì„ ì œì‹œí•´ì£¼ì„¸ìš”.
í•œ ì¤„ ì¡°ì–¸ì€ "ì‘í’ˆ ì† ì£¼ì¸ê³µ ì´ë¦„: ê·¸ ì£¼ì¸ê³µì´ í•´ì¤„ ë§Œí•œ ì¡°ì–¸ ë‚´ìš©" í˜•ì‹ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.
ì—°ì•  ê´€ë ¨ ê³ ë¯¼ì´ ì•„ë‹ˆë©´ "ì—°ì•  ê´€ë ¨ ê³ ë¯¼ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”."ë¼ê³  ë‹µë³€í•˜ì„¸ìš”.

"ë°ì´í„°": {data_str}
"ì‚¬ìš©ì ê³ ë¯¼": {user_input}
"""
    response = client.chat.completions.create(
        model="gpt-3.5-turbo",
        messages=[{"role": "system", "content": system_prompt}],
        temperature=0.7,
        max_tokens=800
    )
    return response.choices[0].message.content


# -----------------------
# Streamlit UI
# -----------------------
st.set_page_config(page_title="ğŸ’Œ í•œêµ­ ê³ ì „ë¬¸í•™ ì—°ì•  ìƒë‹´", page_icon="ğŸ’Œ")


user_input = st.text_input("ì—°ì•  ê³ ë¯¼ì„ ì…ë ¥í•˜ì„¸ìš”...")

if st.button("ìƒë‹´ ë°›ê¸°") and user_input.strip():
    with st.spinner("ê³ ë¯¼ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤..."):
        advice = get_advice(user_input)
    st.subheader("ğŸ“ ìƒë‹´ ê²°ê³¼:")
    st.write(advice)
